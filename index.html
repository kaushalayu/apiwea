<!DOCTYPE html>
<html>
<head>
  <style>
    * {
      padding: 0;
      margin: 0;
    }
    #box {
      height: 720px;
      width: 400px;
      box-shadow: 8px 8px 10px #bdc9c2, -8px -8px 10px #bdc9c2;
      border-radius: 2px;
      margin: 70px auto;
    }
    #inputBox {
      height: 200px;
      width: 100%;
    }
    h1 {
      padding-top: 20px;
    }
    #t1 {
      height: 60px;
      width: 80%;
      margin-top: 30px;
      padding-left: 20px;
      font-size: 20px;
      font-weight: bold;
      border: 4px solid #ba49d6;
      outline: none;
    }
    #inputBox button {
      width: 150px;
      height: 35px;
      font-size: 18px;
      margin-top: 20px;
      background: #ba49d6;
      color: white;
      border-radius: 7px;
      border: none;
      cursor: pointer;
    }
    #img {
      height: 200px;
      width: 60%;
      margin: -40px auto 0 auto;
    }
    #img1 {
      height: 200px;
      width: 100%;
    }
    #info h4 {
      font-size: 20px;
      margin: 15px;
      font-weight: bold;
    }
    #info {
      height: 400px;
      width: 100%;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <div id="box">
    <center><h1>Weather App</h1></center>
    <div id="inputBox">
      <center>
        <input type="text" id="t1" placeholder=" Enter City Name" />
        <br />
        <button onclick="getInfo()">Get Weather</button>
      </center>
    </div>
    <div id="img">
      <img src="weather.webp" alt="no image" id="img1" />
    </div>
    <div id="info">
      <h4>Temperature: <span id="data1"></span> °C</h4>
      <h4>Weather Info: <span id="data2"></span></h4>
      <h4>Feels Like: <span id="data3"></span> °C</h4>
      <h4>Humidity: <span id="data4"></span>%</h4>
      <h4>Location Info: <span id="data5"></span></h4>
      <h4>Recorded At: <span id="data6"></span></h4>
      <h4>Is-Day: <span id="data7"></span></h4>
    </div>
  </div>

  <script>
    function getInfo() {
      const city = document.getElementById("t1").value.trim();

      if (city !== "") {
        fetch(`https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=e083abca82d641cf9c30c58b96efeb5d&units=metric`)
          .then(response => response.json())
          .then(data => {
            if (data.success === false || !data.current) {
              alert("Invalid city or API limit reached.");
              return;
            }

            document.getElementById("data1").innerHTML = data.current.temperature;
            document.getElementById("data2").innerHTML = data.current.weather_descriptions[0] || "N/A";
            document.getElementById("data3").innerHTML = data.current.feelslike;
            document.getElementById("data4").innerHTML = data.current.humidity;
            document.getElementById("data5").innerHTML = data.location.name + ", " + data.location.region + ", " + data.location.country;
            document.getElementById("data6").innerHTML = data.current.observation_time;
            document.getElementById("data7").innerHTML = data.current.is_day;

            const description = data.current.weather_descriptions[0] || "";

            const imgElement = document.getElementById("img1");

            if (description.includes("Mist")) {
              imgElement.src = "Mist.jpg";
            } else if (description.includes("Overcast")) {
              imgElement.src = "cloudy.jpg";
            } else if (description.includes("Partly Cloudy")) {
              imgElement.src = "PRT.jpg";
            } else if (description.includes("Patchy rain")) {
              imgElement.src = "rainyday.jpg";
            } else if (description.includes("Sunny") || description.includes("Clear")) {
              imgElement.src = "sunnyimg.jpg";
            } else {
              imgElement.src = "weather.webp";
            }
          })
          .catch(err => {
            alert("Error fetching data.");
            console.error(err);
          });
      } else {
        alert("Please enter a city name.");
      }
    }
  </script>
</body>
</html>